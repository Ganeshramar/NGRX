import{a as V,b as ft,c as R,d as ht,e as y,f as U,g as vt,h as gt}from"./chunk-6HL7AIRA.js";import{a as _,b as St,c as C,d as bt}from"./chunk-JFCT2LC6.js";import{$a as ut,A as g,Aa as at,B as W,Ba as dt,D as X,E as Y,G as m,Ga as F,H as v,I as S,J as a,Ja as P,Ka as j,N as r,Na as ct,O as n,P as c,Qa as M,Ra as u,Sa as $,T as Z,Ta as q,U as b,Ua as k,V as A,Va as x,Xa as G,Ya as L,Z as p,Za as O,_ as f,a as D,b as T,ea as tt,f as h,fa as et,g as B,ga as it,ha as ot,ka as rt,la as N,na as nt,oa as st,pa as pt,r as H,u as w,v as Q,x as E,ya as mt,za as lt}from"./chunk-CLPIGH75.js";var Dt=j("router"),Ft=P(Dt,i=>i.state);var z="posts",Tt=j(z),J=P(Tt,i=>i?.posts),xt=P(J,Ft,(i,e)=>i.find(l=>l.id===e.params.id?e.params.id:null));var Nt=()=>["/post/add"],jt=i=>["edit",i];function Mt(i,e){if(i&1){let l=Z();r(0,"tr")(1,"td"),p(2),n(),r(3,"td"),p(4),n(),r(5,"td"),p(6),n(),r(7,"td")(8,"a",7),p(9,"Update"),n()(),r(10,"td")(11,"button",8),b("click",function(){let o=X(l).$implicit,s=A(2);return Y(s.onDeletePost(o.id))}),p(12,"Delete"),n()()()}if(i&2){let l=e.$implicit;m(2),f(l==null?null:l.id),m(2),f(l==null?null:l.title),m(2),f(l==null?null:l.description),m(2),a("routerLink",et(4,jt,l==null?null:l.id))}}function $t(i,e){if(i&1&&(r(0,"table",5)(1,"thead")(2,"tr")(3,"th"),p(4,"ID"),n(),r(5,"th"),p(6,"Title"),n(),r(7,"th"),p(8,"Description"),n(),r(9,"th"),p(10,"Actions 1"),n(),r(11,"th"),p(12,"Actions 2"),n()()(),r(13,"tbody"),S(14,Mt,13,6,"tr",6),n()()),i&2){let l=e.ngIf;m(14),a("ngForOf",l)}}var Pt=(()=>{let e=class e{constructor(t){this.store=t}ngOnInit(){this.post$=this.store.select(J),this.store.dispatch(U())}onDeletePost(t){confirm(`Are you sure want to delete this ID : ${t}`)&&this.store.dispatch(y({id:t}))}};e.\u0275fac=function(o){return new(o||e)(v(F))},e.\u0275cmp=g({type:e,selectors:[["app-postlist"]],decls:11,vars:5,consts:[[1,"row"],[1,"col-md-8"],["href","#",1,"btn","btn-info",3,"routerLink"],["class","table table-striped",4,"ngIf"],[1,"col-md-4"],[1,"table","table-striped"],[4,"ngFor","ngForOf"],["href","",1,"btn","btn-primary",3,"routerLink"],[1,"btn","btn-danger",3,"click"]],template:function(o,s){o&1&&(r(0,"div",0)(1,"div",1)(2,"h3"),p(3,"Posts List"),n(),r(4,"div")(5,"a",2),p(6,"Add Post data"),n()(),S(7,$t,15,1,"table",3),it(8,"async"),n(),r(9,"div",4),c(10,"router-outlet"),n()()),o&2&&(m(5),a("routerLink",tt(4,Nt)),m(2),a("ngIf",ot(8,2,s.post$)))},dependencies:[rt,N,mt,at,nt]});let i=e;return i})();function kt(i,e){i&1&&(r(0,"div"),p(1," Title is required "),n())}function Gt(i,e){i&1&&(r(0,"div"),p(1," Title should be minimum 6 characters "),n())}function Lt(i,e){if(i&1&&(r(0,"div"),S(1,kt,2,0,"div",5)(2,Gt,2,0,"div",5),n()),i&2){let l,t,o=A();m(),a("ngIf",(l=o.postForm.get("title"))==null||l.errors==null?null:l.errors.required),m(),a("ngIf",(t=o.postForm.get("title"))==null||t.errors==null?null:t.errors.minlength)}}var yt=(()=>{let e=class e{constructor(t){this.store=t}ngOnInit(){this.postForm=new k({title:new x(null,[u.required,u.minLength(6)]),description:new x(null,[u.required,u.minLength(15)])})}showDescriptionErrors(){let t=this.postForm.get("description");if(t?.touched&&!t.valid){if(t?.errors?.required)return"Description is required";if(t?.errors?.minlength)return"Description should be of minimum 10 characters length"}return""}onAddPost(){if(!this.postForm.valid)return;let t={title:this.postForm.value.title,description:this.postForm.value.description};this.store.dispatch(V({post:t})),this.postForm.reset()}};e.\u0275fac=function(o){return new(o||e)(v(F))},e.\u0275cmp=g({type:e,selectors:[["app-addpost"]],decls:20,vars:4,consts:[[1,"row","my-4"],[1,"col-md-12"],[3,"ngSubmit","formGroup"],[1,"mb-3"],["type","text","formControlName","title",1,"form-control"],[4,"ngIf"],["formControlName","description",1,"form-control"],[1,"my-3"],["type","submit",1,"btn","btn-success",3,"disabled"]],template:function(o,s){if(o&1&&(r(0,"div",0)(1,"div",1)(2,"h3"),p(3,"Add Post"),n(),c(4,"hr"),r(5,"form",2),b("ngSubmit",function(){return s.onAddPost()}),r(6,"div",3)(7,"label"),p(8,"Title"),n(),c(9,"input",4),S(10,Lt,3,2,"div",5),n(),r(11,"div",3)(12,"label"),p(13,"Description"),n(),c(14,"textarea",6),r(15,"div"),p(16),n()(),r(17,"div",7)(18,"button",8),p(19," Add Post "),n()()()()()),o&2){let d;m(5),a("formGroup",s.postForm),m(5),a("ngIf",((d=s.postForm.get("title"))==null?null:d.touched)&&!((d=s.postForm.get("title"))!=null&&d.valid)),m(6),f(s.showDescriptionErrors()),m(2),a("disabled",!s.postForm.valid)}},dependencies:[N,G,M,$,q,L,O]});let i=e;return i})();var _t=(()=>{let e=class e{constructor(t,o){this.store=t,this.router=o}ngOnInit(){this.createForm(),this.postSubscription=this.store.select(xt).subscribe(t=>{this.post=t,this.post&&this.postForm.patchValue({title:this.post.title,description:this.post.description})})}ngOnDestroy(){this.postSubscription&&this.postSubscription.unsubscribe()}showTitleErrors(){let t=this.postForm.get("title");if(t?.touched&&!t.valid){if(t?.errors?.required)return"Title is required";if(t?.errors?.minlength)return"Title should be minimum 6 characters"}return""}showDescriptionErrors(){let t=this.postForm.get("description");if(t?.touched&&!t.valid){if(t?.errors?.required)return"Description is required";if(t?.errors?.minlength)return"Description should be of minimum 10 characters length"}return""}createForm(){this.postForm=new k({title:new x("",[u.required,u.minLength(6)]),description:new x("",[u.required,u.minLength(15)])})}onUpdate(){if(!this.postForm.valid)return;let t={id:this.post?.id,title:this.postForm.value.title,description:this.postForm.value.description};this.store.dispatch(R({post:t})),this.postForm.reset(),this.router.navigate(["post"])}};e.\u0275fac=function(o){return new(o||e)(v(F),v(lt))},e.\u0275cmp=g({type:e,selectors:[["app-editpost"]],decls:21,vars:4,consts:[[1,"row"],[1,"col-md-12"],[3,"ngSubmit","formGroup"],[1,"mb-3"],["type","text","formControlName","title",1,"form-control"],["formControlName","description",1,"form-control"],[1,"my-3"],["type","submit",1,"btn","btn-success",3,"disabled"]],template:function(o,s){o&1&&(r(0,"div",0)(1,"div",1)(2,"h3"),p(3,"Update post"),n(),c(4,"hr"),r(5,"form",2),b("ngSubmit",function(){return s.onUpdate()}),r(6,"div",3)(7,"label"),p(8,"Title"),n(),c(9,"input",4),r(10,"div"),p(11),n()(),r(12,"div",3)(13,"label"),p(14,"Description"),n(),c(15,"textarea",5),r(16,"div"),p(17),n()(),r(18,"div",6)(19,"button",7),p(20," Update Post "),n()()()()()),o&2&&(m(5),a("formGroup",s.postForm),m(6),f(s.showTitleErrors()),m(6),f(s.showDescriptionErrors()),m(2),a("disabled",!s.postForm.valid))},dependencies:[G,M,$,q,L,O]});let i=e;return i})();var Ct=(()=>{let e=class e{constructor(t){this.http=t}getPost(){return this.http.get("https://vue-completecourse.firebaseio.com/posts.json").pipe(h(t=>{let o=[];for(let s in t)o.push(T(D({},t[s]),{id:s}));return o}))}addPost(t){return this.http.post("https://vue-completecourse.firebaseio.com/posts.json",t)}updatePost(t){let o=t?.id,s={id:{title:t.title,description:t.description}};return this.http.patch("https://vue-completecourse.firebaseio.com/posts.json",s)}deletePost(t){return this.http.delete(`https://vue-completecourse.firebaseio.com/posts/${t}.json`)}};e.\u0275fac=function(o){return new(o||e)(E(pt))},e.\u0275prov=w({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var It=(()=>{let e=class e{constructor(t,o){this.actions$=t,this.postService=o,this.loadPost$=_(()=>this.actions$.pipe(C(U),B(s=>this.postService.getPost().pipe(h(d=>vt({post:d})))))),this.addPost$=_(()=>this.actions$.pipe(C(V),B(s=>this.postService.addPost(s.post).pipe(h(d=>{let K=T(D({},s.post),{id:d.name});return console.log(K),ft({post:K})}))))),this.updatePost$=_(()=>this.actions$.pipe(C(R),H(s=>this.postService.updatePost(s.post).pipe(h(d=>ht({post:s.post})))))),this.deletePost$=_(()=>this.actions$.pipe(C(y),H(s=>this.postService.deletePost(s.id).pipe(h(d=>y({id:s.id}))))))}};e.\u0275fac=function(o){return new(o||e)(E(St),E(Ct))},e.\u0275prov=w({token:e,factory:e.\u0275fac});let i=e;return i})();var Vt=[{path:"",component:Pt,children:[{path:"add",component:yt},{path:"edit/:id",component:_t}]}],Pe=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=W({type:e}),e.\u0275inj=Q({imports:[st,ut,ct.forFeature(z,gt),dt.forChild(Vt),bt.forFeature([It])]});let i=e;return i})();export{Pe as postModule};
